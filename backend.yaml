- name: configure backend server
  become: yes
  hosts: app
  vars:
    login_host: app
    login_password: ExpenseApp@1
  tasks:
  - name: disable default nodejs
    ansible.builtin.command: dnf module disable nodejs -y
  
  - name: enable nodejs:20
    ansible.builtin.command: dnf module enable nodejs:20 -y

  - name: install nodejs
    ansible.builtin.dnf: #only works for Redhat family
      name: "{{ item }}"
      state: installed
    loop:
    - nodejs
    - mysql
  
  # - name: create expense user
  #   anisble.builtin.user:
  #     name: expense

  # - name: create app directory
  #   ansible.builtin.file:
  #     path: /app
  #     state: directory

  # - name: download backend code
  #   ansible.builtin.get_url:
  #     url:
  #     dest: /tmp/backend.tmp

  # - name: unzip backend code
  #   ansible.builtin.unarchieve:
  #     src: /tmp/backend.zip  #by default checks in ansible server
